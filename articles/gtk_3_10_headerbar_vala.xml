<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../xsl/article.xsl"?>
<!DOCTYPE article SYSTEM "http://ferruck.github.io/dtd/article.dtd">
<article>
	<published>Sat, 21 Dec 2013 23:44 +0100</published>
	<author link="https://plus.google.com/+PhilippTrommler">Philipp Trommler</author>
	<name>Die neue GTK 3.10 HeaderBar in Vala</name>
	<text>
		<par>Mit GNOME 3.10 haben die neuen HeaderBars Einzug gehalten, die Titelleiste und Toolbar eines Fenster vereinen und so, vor allem auf kleinen Displays, Platz sparen.</par>
		<par>Diese HeaderBars können auch einfach in die eigenen Programme integriert werden, wenn die aktuellen Bibliotheken, also <inlinecode>libgtk-3-0</inlinecode> und <inlinecode>libgtk-3-dev (>= 3.10)</inlinecode>, installiert sind. Das folgende Minimalbeispiel befolgt die aktuellen Empfehlungen zur Erstellung von GNOME-Apps, erweitert also die Gtk.Application Klasse. Eine HeaderBar besteht im Endeffekt aus drei Bereichen, dem linken und dem rechten, die jeweils mit Gtk.Widgets befüllt werden können, und dem mittleren, der entweder mit Titel und gegebenenfalls Untertitel oder mit einem Gtk.Widget belegt wird.</par>
		<heading>Minimalbeispiel</heading>
		<image src="../images/articles/headerbar1.png" alt="Minimalbeispiel für die GTK Headerbar" height="475" width="476">
			<caption>Minimalbeispiel für die GTK Headerbar.</caption>
		</image>
		<par>Dieses Minimalbeispiel kann schon mit wenigen Zeilen Code erstellt werden:</par>
		<code lang="vala"><![CDATA[class Example : Gtk.Application {
	public Example () {
		Object (application_id: "com.example.app", flags: ApplicationFlags.FLAGS_NONE);
	}
	
	protected override void activate () {
		Gtk.ApplicationWindow window = new Gtk.ApplicationWindow (this);
		window.set_default_size (500, 500);
		
		Gtk.HeaderBar headerBar = new Gtk.HeaderBar ();
		headerBar.set_title ("Titel");
		headerBar.set_subtitle ("Untertitel");
		
		
		window.set_titlebar (headerBar);
		window.show_all ();
	}
}

int main (string[] args) {
	return new Example ().run (args);
}]]></code>
		<par>Das ganze wird wie üblich als main.vala gespeichert und mit</par>
		<code lang="bash"><![CDATA[valac --pkg gtk+-3.0 -o example main.vala]]></code>
		<par>kompiliert. Interessant ist hier vor allem <inlinecode>window.set_titlebar (headerBar);</inlinecode>, das dem Fenster die erstellte HeaderBar als Titelzeile zuweist.</par>
		<heading>Die Erweiterung</heading>
		<par>Soll in der Titelleiste ein "Schließen"-Button angezeigt werden, reicht ein einfacher Befehl:</par>
		<code lang="vala"><![CDATA[headerBar.set_show_close_button (true);]]></code>
		<par>Der linke und der rechte Bereich der Titelleiste wird jetzt, wie bei einer <inlinecode>Gtk.Box</inlinecode>, mit <inlinecode>pack_end ()</inlinecode> und <inlinecode>pack_start ()</inlinecode> befüllt, soll also zum Beispiel ein "Öffnen"-Button hinzugefügt werden, reichen die beiden Zeilen:</par>
		<code lang="vala"><![CDATA[Gtk.Button openButton = new Gtk.Button.from_icon_name ("document-open", Gtk.IconSize.LARGE_TOOLBAR);
headerBar.pack_start (openButton);]]></code>
		<par>Hierbei wird schon der neue <inlinecode>Gtk.Button.from_icon_name</inlinecode>-Constructor genutzt, da <inlinecode>Gtk.Stock</inlinecode> ab GTK 3.10 als veraltet markiert ist. Die Iconnamen sind dabei standardisiert und nicht mehr GTK-intern, mehr dazu allerdings in einem anderen Blogpost.</par>
		<image src="../images/articles/headerbar2.png" alt="Erweitertes Minimalbeispiel" height="475" width="476">
			<caption>Erweitertes Minimalbeispiel mit "öffnen"- und "Schließen"-Buttons.</caption>
		</image>
	</text>
	<link>articles/gtk_3_10_headerbar_vala.xml</link>
	<tag>flat</tag>
	<tag>gtk</tag>
	<tag>numix</tag>
	<tag>review</tag>
</article>
